<mat-card>
  <mat-card-header>
    <mat-card-title><h1>HOST NEW EVENT</h1></mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-stepper linear="false" #stepper>
      <mat-step [stepControl]="hostEventForm">
        <form [formGroup]="hostEventForm">
          <ng-template matStepLabel>Event Details</ng-template>

          <mat-form-field appearance="fill">
            <mat-label>Event Title</mat-label>
            <input matInput placeholder="Event title" formControlName="title">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Event Description</mat-label>
            <textarea matInput #description placeholder="Event description (minimum 50 characters)"
              formControlName="eventDescription"></textarea>
            <mat-hint align="end">Characters: {{description.value.length}}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Artists</mat-label>
            <mat-chip-list #chipList1 aria-label="Artist selection">
              <mat-chip *ngFor="let a of artists" (removed)="removeArtist(a)">
                {{a}}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip>
              <input placeholder="New artist/cast..." [matChipInputFor]="chipList1"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes1" [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="addArtist($event)">
            </mat-chip-list>
          </mat-form-field>

          <mat-form-field class="example-chip-list" appearance="fill">
            <mat-label>Genres</mat-label>
            <mat-chip-list #chipList aria-label="Genre selection">
              <mat-chip *ngFor="let gr of genres" (removed)="remove(gr)">
                {{gr}}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip>
              <input placeholder="Add genre..." #genreInput [formControl]="genreCtrl" [matAutocomplete]="auto"
                [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                (matChipInputTokenEnd)="add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
              <mat-option *ngFor="let gr of filteredGenres | async" [value]="gr">
                {{gr}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Languages</mat-label>
            <mat-chip-list #chipList3 aria-label="Language selection">
              <mat-chip *ngFor="let l of languages" (removed)="removeLanguage(l)">
                {{l}}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip>
              <input placeholder="New language..." [matChipInputFor]="chipList3"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes3" [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="addLanguage($event)">
            </mat-chip-list>
          </mat-form-field>

          <div>
            <button mat-button matStepperNext class="btn btn-primary" style="float: right;">Next</button>
          </div>
        </form>
      </mat-step>
      <!-- //////////////////---------------------///////////////////// -->
      <mat-step [stepControl]="hostEventForm" label="Venue Details">
        <h3>Select Event Type</h3>
        <mat-button-toggle-group name="eventType" aria-label="Event Type">
          <mat-button-toggle value="online">Online</mat-button-toggle>
          <mat-button-toggle value="offline">Offline</mat-button-toggle>
        </mat-button-toggle-group>
        <form [formGroup]="hostEventForm">
          <div formGroupName="venue">
            <mat-form-field appearance="fill">
              <mat-label>Venue Name</mat-label>
              <input matInput formControlName="venueName" placeholder="Venue name or URL" required>
            </mat-form-field>
            <h2>Address :</h2>
            <div formGroupName="address">
              <mat-form-field appearance="fill" class="shortinput">
                <mat-label>House No.</mat-label>
                <input matInput formControlName="house" placeholder="House number, Floor number, Building name "
                  required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="mediuminput">
                <mat-label>Street</mat-label>
                <input matInput formControlName="street" placeholder="Street name or Street number" required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="mediuminput">
                <mat-label>Landmark</mat-label>
                <input matInput formControlName="landmark" placeholder="Landmark/Location of the venue" required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="shortinput">
                <mat-label>City</mat-label>
                <input matInput formControlName="city" placeholder="City name" required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="shortinput">
                <mat-label>State</mat-label>
                <input matInput formControlName="state" placeholder="State name" required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="shortinput">
                <mat-label>Pincode</mat-label>
                <input type="number" matInput formControlName="pincode" placeholder="Pincode" required>
              </mat-form-field>
              <mat-form-field appearance="fill" class="shortinput">
                <mat-label>Country</mat-label>
                <mat-select formControlName="country">
                  <mat-option *ngFor="let c of countries" [value]="c">
                    {{c}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <h2>Event Timings :</h2>
          <div formGroupName="eventTimings">
            <mat-form-field appearance="fill" class="shortinput">
              <mat-label>Choose a Starting date</mat-label>
              <input matInput #startDateInput [matDatepicker]="startpicker" formControlName="startDate"
                (dateChange)="startDateChanged()" [min]="presentDate">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matSuffix [for]="startpicker"></mat-datepicker-toggle>
              <mat-datepicker #startpicker></mat-datepicker>
              <mat-error *ngIf="hostEventForm.get('eventTimings').get('startDate').hasError('matStartDateInvalid')">Invalid start date</mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill" class="shortinput">
              <mat-label>Starting time</mat-label>
              <input type="time" matInput placeholder="event starting time" formControlName="startTime">
            </mat-form-field>

            <mat-form-field appearance="fill" class="shortinput">
              <mat-label>Choose an Ending date</mat-label>
              <input matInput [matDatepicker]="endpicker" formControlName="endDate" [min]="eventStartDate">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matSuffix [for]="endpicker"></mat-datepicker-toggle>
              <mat-datepicker #endpicker></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="fill" class="shortinput">
              <mat-label>Ending time</mat-label>
              <input type="time" matInput formControlName="endTime" placeholder="event ending time">
            </mat-form-field>
          </div>
          <div>
            <button mat-button matStepperPrevious class="btn btn-secondary">Back</button>
            <button mat-button matStepperNext class="btn btn-primary" style="float: right;">Next</button>
          </div>
        </form>
      </mat-step>
      <!-- //////////////////---------------------///////////////////// -->
      <mat-step [stepControl]="hostEventForm" label="Seating Arrangement">
        <form [formGroup]="hostEventForm">
          <div formArrayName="seats">
            <div *ngFor="let s of seatingControls; let i=index">
              <div [formGroupName]="i">
                <mat-form-field appearance="fill" class="shortinput">
                  <mat-label>Rows</mat-label>
                  <input type="number" matInput formControlName="row" (change)="calcTotalSeats()">
                </mat-form-field>
                <mat-form-field appearance="fill" class="shortinput">
                  <mat-label>Columns</mat-label>
                  <input type="number" matInput formControlName="colm" (change)="calcTotalSeats()">
                </mat-form-field>
                <mat-form-field appearance="fill" class="shortinput">
                  <mat-label>Ticket Price</mat-label>
                  <input type="number" matInput formControlName="seatPrice">
                </mat-form-field>
                <button (click)="removeSeating(i)">Remove</button>
              </div>
            </div>
          </div>
          <div>
            <button (click)="addSeatings()" class="btn btn-info">Add More</button>
          </div>
          <div>
            <h2>Total Seats : {{totalSeating}}</h2>
          </div>
          <div>
            <button mat-button matStepperPrevious class="btn btn-secondary">Back</button>
            <button mat-button matStepperNext class="btn btn-primary" style="float: right;">Next</button>
          </div>
        </form>
      </mat-step>
      <!-- //////////////////---------------------///////////////////// -->
      <mat-step [stepControl]="hostEventForm" label="Poster">
        <form [formGroup]="hostEventForm">
          <mat-label>Upload Event Poster</mat-label>
          <input type="file" (change)="onFileChange($event)">
          <br>
          <img [src]="posterPicUrl" height="600" alt="no_img" *ngIf="posterPicUrl">
          <div>
            <button mat-button matStepperPrevious class="btn btn-secondary">Back</button>
            <button mat-button matStepperNext class="btn btn-primary" style="float: right;">Next</button>
          </div>
        </form>

      </mat-step>
      <!-- //////////////////---------------------///////////////////// -->
      <mat-step>
        <ng-template matStepLabel>Done</ng-template>
        <h3>Preview:</h3>
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{hostEventForm.get('title').value}}</mat-card-title>
          </mat-card-header>
          <img [src]="posterPicUrl" height="400">
          <mat-card-content>
            <h2>Event Description : {{hostEventForm.get('eventDescription').value}}</h2>
            <mat-label>Upload Event Poster</mat-label>
          </mat-card-content>
        </mat-card>
        <div>
          <button mat-button matStepperPrevious class="btn btn-secondary">Back</button>
          <button mat-button (click)="stepper.reset()" class="btn btn-danger" style="margin-left:2%">Reset</button>
          <button mat-button type="submit" (click)="onSubmit()" class="btn btn-success"
            style="float: right;">Submit</button>
        </div>
      </mat-step>
    </mat-stepper>
  </mat-card-content>
</mat-card>